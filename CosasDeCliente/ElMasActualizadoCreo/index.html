<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Substrings Finder</title>

  <!-- Fonts to support Material Design -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
  <!-- Icons to support Material Design -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
</head>

<body>
  <div id="root"></div>

  <script src="./lib/react.development.js" crossorigin="anonymous"></script>
  <script src="./lib/react-dom.development.js" crossorigin="anonymous"></script>
  <script src="./lib/material-ui.development.js" crossorigin="anonymous"></script>
  <script src="./lib/babel.min.js" crossorigin="anonymous"></script>
  <script src="./src/refreshbrowser.js" crossorigin="anonymous"></script>

  <!-- Libraries fallback -->
  <script>window.React || document.write('<script src="https://unpkg.com/react@16.11.0/umd/react.development.js">\x3C/script>')</script>
  <script>window.ReactDOM || document.write('<script src="https://unpkg.com/react-dom@16.11.0/umd/react-dom.development.js">\x3C/script>')</script>
  <script>window.MaterialUI || document.write('<script src="https://unpkg.com/@material-ui/core@4.6.1/umd/material-ui.development.js">\x3C/script>')</script>
  <script>window.Babel || document.write('<script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js">\x3C/script>')</script>
  <!-- end fallback -->

  <script type="text/babel" type="module">
    const {
      // theme, styles
      colors,
      createMuiTheme,
      makeStyles,
      withStyles,
      // components
      AppBar,
      Button,
      Container,
      CssBaseline,
      Icon,
      IconButton,
      InputAdornment,
      InputLabel,
      FormControl,
      Link,
      List,
      ListItem,
      ListItemIcon,
      ListItemText,
      OutlinedInput,
      TextField,
      ThemeProvider,
      Toolbar,
      Typography,
    } = MaterialUI;
    const theme = createMuiTheme({
      palette: {
        primary: {
          main: '#556cd6',
        },
        secondary: {
          main: '#19857b',
        },
        error: {
          main: colors.red.A400,
        },
        background: {
          default: '#fff',
          paper: '#f5f5f5',
        },
      },
    });
    
    const styles = theme => ({
      root: {
        margin: theme.spacing(6, 0, 3),
      },
      lightBulb: {
        verticalAlign: 'middle',
        // marginRight: theme.spacing(1),
      },
      rootToolBar: {
        flexGrow: 1,
      },
      menuButton: {
        marginRight: theme.spacing(2),
      },
      textField: {
        marginTop: theme.spacing(2),
        marginBottom: theme.spacing(2),
      },
      title: {
        flexGrow: 1,
      },
      rootList: {
        width: '100%',
        backgroundColor: theme.palette.background.paper,
        position: 'relative',
        overflow: 'auto',
        maxHeight: 300,
      },
      textFieldDetails: {
        margin: theme.spacing(2),
      }
    })
    
    const useStyles = makeStyles(styles);

    const getLocalAsJson = (path) => {
      const port = 8086
    
      return fetch(`http://localhost:${port}/${path}`, {
        method: "GET",
        dataType: "JSON",
        headers: {
          "Access-Control-Request-Headers": "*"
        }
      })
    }

    function MyToolBar(props) {
      const classes = useStyles();
      const {title, router, clientId, cartId, password} = props;
    
      let menuButton = (
        <IconButton
          edge="start"
          className={classes.menuButton}
          color="inherit"
          onClick={()=>router.navigate("/catalog", {
            clientId: clientId,
            cartId: cartId})}
          >
          <Icon>home</Icon>
        </IconButton>
      )
    
      let logOutButton = (
        <IconButton
          edge="start"
          className={classes.menuButton}
          color="inherit"
          onClick={()=>router.navigate("/createCart", {
            clientId: '',
            cartId: '',})}
          >
          <Icon>exit_to_app</Icon>
        </IconButton>
      )
    
      if (router.current() === "/listCartView") {
        menuButton = (
          <IconButton
            edge="start"
            className={classes.menuButton}
            color="inherit"
            onClick={()=>router.navigate("/list", {
            selectedSubstring: "",})}
          >
            <Icon>keyboard_arrow_left</Icon>
          </IconButton>
        )
      }
    
    
      const cartButton = (
          <IconButton
            edge="start"
            className={classes.menuButton}
            color="inherit"
            onClick={()=>router.navigate("/cart", {
              clientId: clientId,
              cartId: cartId})}
            >
            <Icon>shopping_cart</Icon>
          </IconButton>
        )
    
      const purchasesButton = (
        <IconButton
          edge="start"
          className={classes.menuButton}
          color="inherit"
          onClick={()=>router.navigate("/purchases", {
            clientId: clientId,
            password: password})}
          >
          <Icon>history</Icon>
        </IconButton>
      )
    
      let showMenuButton = true
    
        if (router.current() === "/createCart" || router.current() === "/ticket" || cartId === "") {
          showMenuButton = false
        }
    
      let showCartButton = false
    
        if (router.current() === "/catalog" || router.current() === "/checkOut" || (router.current() === "/purchases"  && cartId !== "")) {
          showCartButton = true
        }
    
      let showLogOutButton = true
    
      if (router.current() === "/createCart") {
        showLogOutButton = false
      }
    
      let showPurchasesButton = true
    
      if (router.current() === "/createCart" || router.current() === "/purchases") {
        showPurchasesButton = false
      }
    
      return (
        <div className={classes.rootToolBar}>
          <AppBar position="static">
            <Toolbar>
              {showMenuButton && menuButton}
              <Typography variant="h6" className={classes.title}>
                {title}
              </Typography>
              {/*<Button color="inherit">Login</Button>*/}
              {showCartButton && cartButton}
              {showPurchasesButton && purchasesButton}
              {showLogOutButton && logOutButton}
            </Toolbar>
          </AppBar>
        </div>
      )
    }
    function CreateCartView(props) {
      const { router } = props
      const classes = useStyles();
      const [values, setValues] = React.useState({
        user: '',
        password: ''
      });
    
      const handleChange = prop => event => {
        setValues({ ...values, [prop]: event.target.value });
      };
      const handleSend = values => {
        const user = values.user
        const password = values.password
        getLocalAsJson(`createCart?clientId=${user}&password=${values.password}`)
          .then(function (response) {
            
            return response.json()
          })
          .then(function (json) {
              // si en json.error_code es 0 -> voy al catalogo (actualizando cartId y clientId), 
              // si es 1 ->  mensaje de error {alert('Datos Inválidos');}
            if (json.errorCode === 0) {
              router.navigate("/catalog", { clientId: user, cartId: json.cartId, password: password })
            }
            if (json.errorCode === 1) {
              {alert('Datos Inválidos');}
            }
          })
          .catch(function (error) {
            console.log('Looks like there was a problem: \n', error);
          });
      }
    
      return (
        <div>
          <Typography component="h1" gutterBottom>
              Ingrese su usuario y contraseña para crear un carrito.
              </Typography>
          <FormControl fullWidth className={classes.textField} variant="outlined">
            <InputLabel htmlFor="outlined-adornment-amount">Usuario</InputLabel>
            <OutlinedInput
              id="outlined-adornment-amount"
              value={values.user}
              onChange={handleChange('user')}
              labelWidth={60}
              required
            />
          </FormControl>
    
          <FormControl fullWidth className={classes.textField} variant="outlined">
            <InputLabel htmlFor="outlined-adornment-amount">Contraseña</InputLabel>
            <OutlinedInput
              type="password"
              id="outlined-adornment-amount"
              value={values.password}
              onChange={handleChange('password')}
              labelWidth={90}
            />
          </FormControl>
    
          <Button
            color="primary"
            type="submit"
            onClick={() => handleSend(values)}>
            Crear carrito
              </Button>
        </div>
      )
    }
    
    
    
    class CatalogView extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          catalog: {},
          listCart: {},
          cartFetched: false,
          catalogFetched: false
        }
      }
    
      fetchListCart(cartId, component) {
        getLocalAsJson(`listCart?cartId=${cartId}`)
          .then(function(response){
            return response.json()
          })
          .then(function(json) {
            if (json.errorCode === 0) {
              component.setState({listCart: json.list, catalog: component.state.catalog,
                                  cartFetched: true, catalogFetched: component.state.catalogFetched}); 
            }
            if (json.errorCode === 1) {
              {alert('Hubo un error recuperando sus datos');}
            }
          })
          .catch(function (error) {
            console.log('Looks like there was a problem: \n', error);
          });
      }
    
      handleAdd(isbn){
        const { cartId } = this.props
        let component = this
        getLocalAsJson(`addToCart?cartId=${cartId}&bookIsbn=${isbn}&bookQuantity=1`)
          .then(function (response) {
            
            return response.json()
          })
          .then(function (json) {
              // si en json.error_code es 0 -> voy al catalogo (actualizando cartId y clientId), 
              // si es 1 ->  mensaje de error {alert('Datos Inválidos');}
            if (json.errorCode === 0) {
              component.fetchListCart(cartId, component)
            }
            if (json.errorCode === 1) {
              {alert('Hubo un error añadiendo su libro. Intente nuevamente.');}
            }
          })
          .catch(function (error) {
            console.log('Looks like there was a problem: \n', error);
          });
      }
    
      handleRemove(isbn){
        const { cartId } = this.props
        let component = this
        getLocalAsJson(`removeBook?cartId=${cartId}&bookIsbn=${isbn}`)
          .then(function (response) {
            
            return response.json()
          })
          .then(function (json) {
              // si en json.error_code es 0 -> voy al catalogo (actualizando cartId y clientId), 
              // si es 1 ->  mensaje de error {alert('Datos Inválidos');}
            if (json.errorCode === 0) {
              component.fetchListCart(cartId, component)
            }
            if (json.errorCode === 1) {
              {alert('Hubo un error quitando su libro. Intente nuevamente.');}
            }
          })
          .catch(function (error) {
            console.log('Looks like there was a problem: \n', error);
          });
      }
    
      componentDidMount(){
        let component = this;
        const { cartId } = this.props
    
        getLocalAsJson('catalog')
          .then(function(response){
            return response.json()
          })
          .then(function(json) {
            if (json.errorCode === 0) {
              component.setState({listCart: component.state.listCart, catalog: json.catalog,
                                  cartFetched: component.state.cartFetched, catalogFetched: true}); 
            }
            if (json.errorCode === 1) {
              {alert('No se puede acceder al catálogo en este momento');}
            }
          })
          .catch(function (error) {
            console.log('Looks like there was a problem: \n', error);
          });
        this.fetchListCart(cartId, component)
      }
    
      render() {
        const {
          router,
          clientId,
          cartId,
          classes
        } = this.props
    
        //const classes = useStyles();
        console.log(this.state.listCart[1])
    
        console.log("listcart")
    
        return (
          <div>
         <List component="nav" aria-label="substrings">
          { this.state.cartFetched && this.state.catalogFetched && this.state.catalog && Object.keys(this.state.catalog).map((key, ix) => {
              return (
                <ListItem
                  key={ix}
                  //onClick={() => router.navigate('/info', { bookSelected: key, catalog: this.state.catalog })}
                  >
                  <IconButton 
                    edge="start"
                    color="default"
                    onClick={() => router.navigate('/info', { bookSelected: key, catalog: this.state.catalog })}
                    >
                    <Icon>info_two_tones</Icon>
                  </IconButton>
                  
                  <ListItemText primary={this.state.catalog[key].title}
                                secondary={`ISBN ${key} Precio unitario: ${this.state.catalog[key].price}`} />
                  
                  <IconButton 
                    edge="start"
                    color="default"
                    onClick={() => this.handleRemove(key)}
                    >
                    <Icon>remove_circle_outline_rounded</Icon>
                  </IconButton>
                  {(this.state.listCart && this.state.listCart[key]) || 0 }
                  <IconButton
                    edge="start"
                    color="primary"
                    onClick={() => this.handleAdd(key)}
                    >
                    <Icon>add_circle_outline_rounded</Icon>
                  </IconButton>
                </ListItem>
              )
            })
          }
        </List>
        </div>
        )
      }
    }
    /*
    // Add style
    const SubstringsView = withStyles(styles, {
      withTheme: true
    })(SubstringsComponent)
    */    class CartView extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            catalog: {},
            listCart: {},
            cartFetched: false,
            catalogFetched: false
          }
        }
      
        fetchListCart(cartId, component) {
          getLocalAsJson(`listCart?cartId=${cartId}`)
            .then(function(response){
              return response.json()
            })
            .then(function(json) {
              if (json.errorCode === 0) {
                component.setState({listCart: json.list, catalog: component.state.catalog, cartFetched: true}); 
              }
              if (json.errorCode === 1) {
                {alert('Hubo un error recuperando sus datos');}
              }
            })
            .catch(function (error) {
              console.log('Looks like there was a problem: \n', error);
            });
        }
      
        handleAdd(isbn){
          const { cartId } = this.props
          let component = this
          getLocalAsJson(`addToCart?cartId=${cartId}&bookIsbn=${isbn}&bookQuantity=1`)
            .then(function (response) {
              
              return response.json()
            })
            .then(function (json) {
                // si en json.error_code es 0 -> voy al catalogo (actualizando cartId y clientId), 
                // si es 1 ->  mensaje de error {alert('Datos Inválidos');}
              if (json.errorCode === 0) {
                component.fetchListCart(cartId, component)
              }
              if (json.errorCode === 1) {
                {alert('Hubo un error añadiendo su libro. Intente nuevamente.');}
              }
            })
            .catch(function (error) {
              console.log('Looks like there was a problem: \n', error);
            });
        }
      
        handleRemove(isbn){
          const { cartId } = this.props
          let component = this
          getLocalAsJson(`removeBook?cartId=${cartId}&bookIsbn=${isbn}`)
            .then(function (response) {
              
              return response.json()
            })
            .then(function (json) {
                // si en json.error_code es 0 -> voy al catalogo (actualizando cartId y clientId), 
                // si es 1 ->  mensaje de error {alert('Datos Inválidos');}
              if (json.errorCode === 0) {
                component.fetchListCart(cartId, component)
              }
              if (json.errorCode === 1) {
                {alert('Hubo un error quitando su libro. Intente nuevamente.');}
              }
            })
            .catch(function (error) {
              console.log('Looks like there was a problem: \n', error);
            });
        }
    
        handleCheckOut() {
          const { router, clientId, cartId } = this.props
          router.navigate("/checkOut", { clientId: clientId, cartId: cartId })
        }  
      
        componentDidMount(){
          let component = this;
          const { cartId } = this.props
      
          getLocalAsJson('catalog')
            .then(function(response){
              return response.json()
            })
            .then(function(json) {
              if (json.errorCode === 0) {
                component.setState({listCart: component.state.listCart, catalog: json.catalog,
                                    cartFetched: component.state.cartFetched, catalogFetched: true}); 
              }
              if (json.errorCode === 1) {
                {alert('No se puede acceder al catálogo en este momento');}
              }
            })
            .catch(function (error) {
              console.log('Looks like there was a problem: \n', error);
            });
          this.fetchListCart(cartId, component)
        }
      
        render() {
          const {
            router,
            clientId,
            cartId,
            classes
          } = this.props
      
          return (
            <div>
           <List component="nav" aria-label="substrings">
            {
              this.state.cartFetched && this.state.catalogFetched && this.state.catalog && this.state.listCart && Object.keys(this.state.listCart).map((key, ix) => {
                return (
                  <ListItem
                    key={ix}
                    >
                    <IconButton 
                      edge="start"
                      color="default"
                      onClick={() => router.navigate('/info', { bookSelected: key, catalog: this.state.catalog })}
                      >
                      <Icon>info_two_tones</Icon>
                    </IconButton>
    
                    <ListItemText primary={this.state.catalog[key].title}
                                  secondary={`ISBN ${key} Precio unitario: ${this.state.catalog[key].price}`} />
                    <IconButton
                      edge="start"
                      color="default"
                      onClick={() => this.handleRemove(key)}
                      >
                      <Icon>remove_circle_outline_rounded</Icon>
                    </IconButton>
                    {(this.state.listCart && this.state.listCart[key]) || 0 }
                    <IconButton
                      edge="start"
                      color="primary"
                      onClick={() => this.handleAdd(key)}
                      >
                      <Icon>add_circle_outline_rounded</Icon>
                    </IconButton>
                  </ListItem>
                )
              })
            }
          </List>
          { Object.keys(this.state.listCart).length !== 0 &&
          <Button
            color="primary"
            onClick={() => this.handleCheckOut()}>
            Check out
            <Icon>local_mall</Icon>
              </Button>
          }
          { Object.keys(this.state.listCart).length === 0 &&
            <div>
            <Typography component="h1" gutterBottom>
            No ha añadido ningún libro todavía.
            </Typography>
            <Button
            color="primary"
            onClick={() => router.navigate("/catalog", {clientId: clientId, cartId: cartId})}>
            Seguir comprando
            <Icon>shopping_basket_outlined</Icon>
              </Button>
            </div>
          }
          </div>
          )
        }
      }
      /*
      // Add style
      const SubstringsView = withStyles(styles, {
        withTheme: true
      })(SubstringsComponent)
      */    class TicketView extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            ticket: props.ticket,
            catalog: {},
            catalogFetched: false
          }
        } 
      
        componentDidMount() {
          let component = this;
    
          console.log("didmount")
      
          getLocalAsJson('catalog')
            .then(function(response){
              return response.json()
            })
            .then(function(json) {
              if (json.errorCode === 0) {
                component.setState({ticket: component.state.ticket, catalog: json.catalog, catalogFetched: true}); 
              }
              if (json.errorCode === 1) {
                {alert('Hubo un error al procesar su ticket');}
              }
            })
            .catch(function (error) {
              console.log('Looks like there was a problem: \n', error);
              {alert('Hubo un error al procesar su ticket');}
            });
        }
      
        render() {
          const {
            router
          } = this.props
    
          return (
            <div>
           <List component="nav" aria-label="productos">
            { this.state.catalog && this.state.catalogFetched && Object.keys(this.state.ticket.products).map((key, ix) => {
                return (
                  <ListItem
                    key={ix}
                    >
                    <ListItemText primary={this.state.catalog[key].title}
                                  secondary={`ISBN ${key}`} />
                    {this.state.ticket.products[key].quantity} x ${this.state.catalog[key].price}
                  </ListItem>
                )
              })
            }
          </List>
          Total: ${this.state.ticket.total}
          </div>
          )
        }
      }
    class BookInfoView extends React.Component {
        constructor(props) {
          super(props)
      
          this.state = {
            bookSelected: props.bookSelected,
            catalog: props.catalog
          }
        }
    
        render() {
          const {
            // router,
            bookSelected,
            catalog
          } = this.state
      
          const {
            author,
            title,
            price
          } = catalog[bookSelected]
    
          return (
            <div>
              <Typography variant="h4" component="h4" gutterBottom>
                <b>{title}</b>
              </Typography>
      
              <TextField
                id="outlined-read-only-input"
                label="Autor"
                defaultValue={author}
                margin="normal"
                InputProps={{
                  readOnly: true,
                }}
                variant="outlined"
              />
              <TextField
                id="outlined-read-only-input"
                label="ISBN"
                defaultValue={bookSelected}
                margin="normal"
                InputProps={{
                  readOnly: true,
                }}
                variant="outlined"
              />
              <TextField
                id="outlined-read-only-input"
                label="Precio"
                defaultValue={price}
                margin="normal"
                InputProps={{
                  readOnly: true,
                }}
                variant="outlined"
              />
            </div>
          )
        }
      }
    function CheckOutView(props) {
        const { router } = props
        const classes = useStyles();
        const [values, setValues] = React.useState({
          ccn: '',
          cco: '',
          cced: ''
        });
      
        const handleChange = prop => event => {
          setValues({ ...values, [prop]: event.target.value });
        };
    
        const handleSend = values => {
          const { ccn, cco, cced } = values
          const { cartId } = props
          let badRequest = false
          getLocalAsJson(`checkOutCart?cartId=${cartId}&ccn=${ccn}&cco=${cco}&cced=${cced}`)
            .then(function (response) {
              if (response.status === 400) {
                badRequest = true
              }
              return response.json()  
            })
            .then(function (json) {
                // si en json.error_code es 0 -> voy al catalogo (actualizando cartId y clientId), 
                // si es 1 ->  mensaje de error {alert('Datos Inválidos');}
              if (json.errorCode === 0) {
                router.navigate("/ticket", { cartId: '', ticket: json.ticket })
              }
              if (json.errorCode === 1) {
                {alert(json.message);}
              }
              if (badRequest) {
                {alert(json.error)}
              }
            })
            .catch(function (error) {
              console.log(error)
              console.log('Looks like there was a problem: \n', error);
            });
        }
      
        return (
          <div>
            <Typography component="h1" gutterBottom>
                Ingrese los datos de su tarjeta para continuar.
                </Typography>
            <FormControl fullWidth className={classes.textField} variant="outlined">
              <InputLabel htmlFor="outlined-adornment-amount">Número de tarjeta de crédito </InputLabel>
              <OutlinedInput
                id="outlined-adornment-amount"
                value={values.ccn}
                onChange={handleChange('ccn')}
                labelWidth={205}
              />
            </FormControl>
      
            <FormControl fullWidth className={classes.textField} variant="outlined">
              <InputLabel htmlFor="outlined-adornment-amount">Nombre del titular a cargo</InputLabel>
              <OutlinedInput
                id="outlined-adornment-amount"
                value={values.cco}
                onChange={handleChange('cco')}
                labelWidth={190}
              />
            </FormControl>
    
            <FormControl fullWidth className={classes.textField} variant="outlined">
              <InputLabel htmlFor="outlined-adornment-amount">Fecha de expiración</InputLabel>
              <OutlinedInput
                id="outlined-adornment-amount"
                placeholder="mmyyyy"
                value={values.cced}
                onChange={handleChange('cced')}
                labelWidth={145}
              />
            </FormControl>
      
            <Button
              color="primary"
              onClick={() => handleSend(values)}>
              Continuar
              <Icon>payment</Icon>
                </Button>
          </div>
        )
      }    class PurchasesView extends React.Component {
        constructor(props) {
          super(props);
          this.state = {
            catalog: {},
            catalogFetched: false,
            purchases: {},
            purchasesFetched: false
          }
        }
      
        fetchPurchases(clientId, password) {
          let component = this
    
          getLocalAsJson(`listPurchases?clientId=${clientId}&password=${password}`)
            .then(function(response){
              return response.json()
            })
            .then(function(json) {
              if (json.errorCode === 0) {
                component.setState({purchasesFetched: true, purchases: json.purchases}); 
              }
              if (json.errorCode === 1) {
                {alert('Hubo un error recuperando sus datos');}
              }
            })
            .catch(function (error) {
              console.log('Looks like there was a problem: \n', error);
            });
        }
      
        componentDidMount(){
          let component = this;
          const { clientId, password } = this.props
      
          getLocalAsJson('catalog')
            .then(function(response){
              return response.json()
            })
            .then(function(json) {
              if (json.errorCode === 0) {
                component.setState({catalog: json.catalog, catalogFetched: true,
                                    purchases: component.state.purchases, purchasesFetched: component.state.purchasesFetched}); 
              }
              if (json.errorCode === 1) {
                {alert('No se puede acceder al catálogo en este momento');}
              }
            })
            .catch(function (error) {
              console.log('Looks like there was a problem: \n', error);
            });
          this.fetchPurchases(clientId, password)
        }
      
        render() {
          const {
            router,
            clientId,
            cartId,
            classes
          } = this.props
      
          return (
            <div>
           <List component="nav" aria-label="productos">
            { this.state.catalogFetched && this.state.purchasesFetched && Object.keys(this.state.purchases.booksPurchased).map((key, ix) => {
                return (
                  <ListItem
                    key={ix}
                    >
                    <ListItemText primary={this.state.catalog[key].title}
                                  secondary={`ISBN ${key}`} />
                    {this.state.purchases.booksPurchased[key]}
                  </ListItem>
                )
              })
            }
          </List>
          Total: ${this.state.purchases.total}
          </div>
          )
        }
      }
    class App extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          path: "/createCart",
          clientId: '',
          cartId: '',
          ticket: {},
          bookSelected: '',
          catalog: {},
          password: ''
        };
      }
    
      render() {
        let title = "Tus Libros"
        let content = "Where am I?"
        const router = {
          current: () => this.state.path,
          navigate: (path, state) => {
            // http://es6-features.org/#SpreadOperator
            this.setState({ ...state, path: path })
          }
        }
    
        if (this.state.path === "/createCart") {
          content = (<CreateCartView
            router={router}
          />)
        } else if (this.state.path === "/catalog") {
          content = (<CatalogView
            router={router}
            clientId={this.state.clientId}
            cartId={this.state.cartId}
          />)
        } else if (this.state.path === "/info") {
          content = (<BookInfoView
            router={router}
            bookSelected={this.state.bookSelected}
            catalog={this.state.catalog}
          />)
        } else if (this.state.path === "/cart") {
          content = (<CartView 
            router={router}
            clientId={this.state.clientId}
            cartId={this.state.cartId}
          />)
        } else if (this.state.path === "/checkOut") {
          content = (<CheckOutView 
            router={router}
            clientId={this.state.clientId}
            cartId={this.state.cartId}
          />)
        } else if (this.state.path === "/ticket") {
          content = (<TicketView 
            router={router}
            ticket={this.state.ticket}
          />)
        } else if (this.state.path === "/purchases") {
          content = (<PurchasesView
          router={router}
          clientId={this.state.clientId}
          password={this.state.password}
          />)
        }
        return (
          <div>
            <MyToolBar
              title={title}
              router={router}
              clientId={this.state.clientId}
              cartId={this.state.cartId}
              password={this.state.password}
            />
            <Container maxWidth="sm">
              <div style={{ marginTop: 24, }}>
                {content}
              </div>
            </Container>
          </div>
        );
      }
    }

    ///////////////////////////////////////////////////////////////////////////
    // Initial render
    //
    ReactDOM.render(
      <ThemeProvider theme={theme}>
        <CssBaseline />
        <App />
      </ThemeProvider>,
      document.getElementById('root')
    )
  </script>

  <!-- <button onclick="window.location.reload(true)">reload</button> -->
</body>

</html>
